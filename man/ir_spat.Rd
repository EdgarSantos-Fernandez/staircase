% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/functions.R
\name{ir_spat}
\alias{ir_spat}
\title{Fits a spatial item response model using Stan}
\usage{
ir_spat(
  formula,
  data,
  spat_model = "exp",
  itemtype = "3PLUS",
  abil = "user",
  diff = "id",
  y,
  coords = coords,
  iter = 4000,
  warmup = 2000,
  chains = 3,
  seed = seed,
  refresh = max(1000/100, 1),
  loglik = F
)
}
\arguments{
\item{formula}{Formula in the form of a linear model (see ?lm())}

\item{data}{Long data frame containing the locations, dates, covariates and the response variable. It has to have the locID and date. No missing values are allowed in the covariates.}

\item{spat_model}{String with the spatial correlation structure based on Euclidean distance models. The options are: exponential (exp), spherical (sph), gaussian (gau), car (Conditional Autoregressive). For no spatial autocorrelation use "none".}

\item{itemtype}{String with the kind of item response model. Options: 3PLUS, 2PLUS, 1PLUS, 3PL, 2PL and 1PL. PLUS and PL models are spatial and non-spatial respectivelly.}

\item{abil}{Column indicating the user id}

\item{diff}{Column indicating the item id}

\item{y}{Binary response variable (1 = correct, 0 = otherwise).}

\item{coords}{A vector with the longitude and latitude for Euclidean distance models.}

\item{iter}{Number of iterations}

\item{warmup}{The number of warm up sample iterations that are performed}

\item{chains}{Number of chains}

\item{seed}{(optional) A seed for reproducibility}

\item{refresh}{The refresh rate showing the progress}

\item{loglik}{If the log-likelihood will be computed (True/False)}
}
\value{
Returns a list with the model fit.
}
\description{
Fits a spatial item response model using Stan
}
\details{
Missing values are not allowed in the covariates and they must be
imputed before using ir_spat(). Many options can be found in
https://cran.r-project.org/web/views/MissingData.html.\cr\cr The probability
that a user correctly identified a point is specified by the equation:\cr\cr
\figure{probability.png}{options: align="middle"}\cr\cr
The model above indicates the probability (p_ijk) that a user (i) identifies
annotation (j) in image (k) correctly. Wher: \cr
   θ_i is the latent ability of the user i (larger θ indicates a larger
   probability of identifying the item). \cr
   η_j is the pseudoguessing for image j. This accounts for the chance of
   the user correctly identifying the item through guessing.
   b_j is the difficulty of the image j.
   α_j represents the slope or discrimination parameter of image j. This
   indicates how quickly the function will go from 0 to 1.
\cr The item type parameter
 in the ir_spat function can receive any of the Models in the first column:\cr
 \cr\figure{modelCoef.png}{options: align="middle"}
}
\examples{
# ir_spat(formula = site ~ -1 + Standing + Resting + Moving + Eating + Interacting + Babies,
#                    data = s,
#                    spat_model = 'car',
#                    itemtype = '3PLUS',
#                    iter = 40,
#                    warmup = 20,
#                    chains = 3,
#                    refresh = 100
#                    )
}
